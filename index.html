<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ - Naranjo Algorithm</title>

  <!--
    Font: ‡πÉ‡∏ä‡πâ Sarabun ‡∏à‡∏≤‡∏Å Google Fonts ‡πÅ‡∏ï‡πà‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô "SarabunNew"
    (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå PDF ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- html2pdf.js (‡∏£‡∏ß‡∏° html2canvas + jsPDF) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö export ‡πÄ‡∏õ‡πá‡∏ô PDF -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErCz9YgSg7i3qIYp8yq6qYV7z9Y0kVh2p2LQmZ8p0QO2VqgQmHh1d7xw8o3bXn4cNwKQO8w2r1xg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <style>
    /* Map Sarabun -> SarabunNew (‡∏ï‡∏≤‡∏° requirement) */
    :root {
      --font-main: "SarabunNew", "Sarabun", "Segoe UI", Tahoma, sans-serif;
      --primary: #667eea;
      --primary-dark: #5568d3;
      --danger: #dc3545;
      --warning: #fd7e14;
      --info: #ffc107;
      --success: #28a745;
    }

    @font-face {
      font-family: "SarabunNew";
      font-style: normal;
      font-weight: 300;
      src: local("Sarabun Light"), local("Sarabun");
    }
    @font-face {
      font-family: "SarabunNew";
      font-style: normal;
      font-weight: 400;
      src: local("Sarabun Regular"), local("Sarabun");
    }
    @font-face {
      font-family: "SarabunNew";
      font-style: normal;
      font-weight: 500;
      src: local("Sarabun Medium"), local("Sarabun");
    }
    @font-face {
      font-family: "SarabunNew";
      font-style: normal;
      font-weight: 600;
      src: local("Sarabun SemiBold"), local("Sarabun");
    }
    @font-face {
      font-family: "SarabunNew";
      font-style: normal;
      font-weight: 700;
      src: local("Sarabun Bold"), local("Sarabun");
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-main);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      padding: 30px;
    }

    h1 {
      color: var(--primary);
      text-align: center;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border-left: 4px solid var(--primary);
    }

    .section-title {
      color: #333;
      font-size: 20px;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      color: #555;
      font-weight: 500;
    }

    input[type="text"],
    input[type="date"],
    input[type="tel"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border-color 0.3s;
      font-family: var(--font-main);
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 15px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 15px;
    }

    .drug-entry {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      position: relative;
    }

    .drug-entry-title {
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .add-btn,
    .remove-btn,
    .submit-btn,
    .secondary-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s;
      font-family: var(--font-main);
    }

    .add-btn {
      background: #28a745;
      color: white;
      margin-top: 10px;
    }
    .add-btn:hover {
      background: #218838;
    }

    .secondary-btn {
      background: #0d6efd;
      color: white;
      margin-top: 10px;
    }
    .secondary-btn:hover {
      background: #0b5ed7;
    }

    .remove-btn {
      background: #dc3545;
      color: white;
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 5px 15px;
      font-size: 14px;
    }
    .remove-btn:hover {
      background: #c82333;
    }

    .submit-btn {
      background: var(--primary);
      color: white;
      width: 100%;
      padding: 15px;
      font-size: 18px;
      margin-top: 20px;
    }
    .submit-btn:hover {
      background: var(--primary-dark);
    }

    .question {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .question-text {
      font-weight: 500;
      margin-bottom: 10px;
      color: #333;
    }

    .radio-group {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .radio-option input[type="radio"] {
      width: auto;
      cursor: pointer;
    }

    .radio-option label {
      margin: 0;
      cursor: pointer;
      font-weight: normal;
    }

    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 12px;
    }

    .symptom-card {
      background: white;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #ddd;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      user-select: none;
    }

    .symptom-card:hover {
      border-color: var(--primary);
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
    }

    .symptom-card.selected {
      border-color: var(--primary);
      background: #e7f3ff;
    }

    .symptom-card input[type="checkbox"] {
      position: absolute;
      opacity: 0;
    }

    .symptom-name {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .symptom-name::before {
      content: "‚òê";
      font-size: 20px;
      color: #999;
    }

    .symptom-card.selected .symptom-name::before {
      content: "‚òë";
      color: var(--primary);
    }

    .symptom-description {
      font-size: 13px;
      color: #666;
      line-height: 1.4;
    }

    .severity-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-top: 6px;
      white-space: nowrap;
    }

    .severity-mild {
      background: #d4edda;
      color: #155724;
    }
    .severity-moderate {
      background: #fff3cd;
      color: #856404;
    }
    .severity-severe {
      background: #f8d7da;
      color: #721c24;
    }
    .severity-emergency {
      background: #dc3545;
      color: white;
    }

    .info-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 16px;
      font-size: 12px;
      cursor: help;
      margin-left: 5px;
    }

    .tooltip {
      position: relative;
      display: inline-block;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 320px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 2;
      bottom: 125%;
      left: 50%;
      margin-left: -160px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 13px;
      line-height: 1.6;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .result {
      display: none;
      background: #e7f3ff;
      padding: 25px;
      border-radius: 10px;
      margin-top: 30px;
      border: 2px solid var(--primary);
    }

    .result.show {
      display: block;
    }

    .result-title {
      color: var(--primary);
      font-size: 24px;
      margin-bottom: 15px;
      text-align: center;
    }

    .result-content {
      font-size: 16px;
      color: #333;
      text-align: center;
    }

    .score-box {
      background: var(--primary);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      font-size: 20px;
      font-weight: 600;
    }

    .patient-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .alert {
      background: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 12px;
      border-radius: 5px;
      margin-bottom: 15px;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
      padding: 10px;
      background: white;
      border-radius: 5px;
      font-size: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .footer-note {
      margin-top: 18px;
      padding-top: 14px;
      border-top: 1px dashed #c7d2fe;
      color: #555;
      font-size: 13px;
      line-height: 1.6;
      text-align: left;
      background: rgba(255, 255, 255, 0.65);
      border-radius: 8px;
      padding: 12px;
    }

    .result-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 16px;
    }

    .btn-print {
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      padding: 10px 30px;
      font-family: var(--font-main);
    }
    .btn-print:hover {
      background: var(--primary-dark);
    }

    .btn-pdf {
      background: #111827;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      padding: 10px 30px;
      font-family: var(--font-main);
    }
    .btn-pdf:hover {
      background: #0b1220;
    }

    .muted {
      color: #6b7280;
      font-size: 13px;
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .container {
        box-shadow: none;
        border-radius: 0;
        padding: 16px;
        max-width: 100%;
      }
      .submit-btn,
      .add-btn,
      .secondary-btn,
      .remove-btn,
      .result-actions {
        display: none !important;
      }
      .section {
        background: white;
        border-left: none;
        padding: 10px 0;
      }
      .alert {
        background: white;
        border: 1px solid #ddd;
      }
      .result {
        border: none;
        background: white;
        padding: 0;
      }
    }

    @media (max-width: 768px) {
      .checkbox-grid {
        grid-template-columns: 1fr;
      }
      .patient-info {
        grid-template-columns: 1fr;
      }
      .grid-2,
      .grid-3 {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üè• ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h1>
    <p class="subtitle">Naranjo Adverse Drug Reaction Probability Scale</p>

    <form id="assessmentForm">
      <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
        <div class="patient-info">
          <div class="form-group">
            <label for="hn">HN:</label>
            <input type="text" id="hn" name="hn" required />
          </div>
          <div class="form-group">
            <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠:</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>
          <div class="form-group">
            <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <input type="text" id="lastName" name="lastName" required />
          </div>
          <div class="form-group">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
            <input type="tel" id="phone" name="phone" required />
          </div>
        </div>
      </div>

      <!-- ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h2>
        <div class="alert">
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠) - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
        </div>

        <div class="checkbox-grid" id="symptomsGrid">
          <!-- Maculopapular rash -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp1" name="symptoms" value="Maculopapular rash (MP rash)" data-sev="mild" />
            <div class="symptom-name">
              Maculopapular rash (MP rash)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô<br />
                  <strong>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢:</strong> ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£ 2 ‡∏Ç‡πâ‡∏≤‡∏á<br />
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡πÑ‡∏Ç‡πâ ‡∏Ñ‡∏±‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô - ‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
            <span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
          </div>

          <!-- Urticaria -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp2" name="symptoms" value="Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)" data-sev="moderate" />
            <div class="symptom-name">
              Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î<br />
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡πÄ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.<br />
                  <strong>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong> ‡∏≠‡∏≤‡∏à‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏õ‡πá‡∏ô anaphylaxis
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î ‡∏Ñ‡∏±‡∏ô‡∏°‡∏≤‡∏Å ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.</div>
            <span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á</span>
          </div>

          <!-- Angioedema -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp3" name="symptoms" value="Angioedema" data-sev="emergency" />
            <div class="symptom-name">
              Angioedema
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á<br />
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡∏£‡∏¥‡∏°‡∏ù‡∏µ‡∏õ‡∏≤‡∏Å ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤<br />
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏≠‡∏≤‡∏à‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö anaphylactic shock
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏õ‡∏≤‡∏Å ‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</span>
          </div>

          <!-- Fixed Drug Eruption -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp4" name="symptoms" value="Fixed Drug Eruption" data-sev="mild" />
            <div class="symptom-name">
              Fixed Drug Eruption
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏Ñ‡∏•‡πâ‡∏≥/‡∏°‡πà‡∏ß‡∏á<br />
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏â‡∏û‡∏≤‡∏∞:</strong> ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°<br />
                  <strong>‡∏´‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏¢:</strong> ‡∏°‡∏±‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡∏Ñ‡∏•‡πâ‡∏≥ ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏° ‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥</div>
            <span class="severity-badge severity-mild">‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span>
          </div>

          <!-- Exfoliative dermatitis -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp5" name="symptoms" value="Exfoliative dermatitis" data-sev="severe" />
            <div class="symptom-name">
              Exfoliative dermatitis
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br />
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Ñ‡∏±‡∏ô ‡πÅ‡∏´‡πâ‡∏á ‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô<br />
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏†‡∏≤‡∏ß‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ã‡πâ‡∏≠‡∏ô
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏ï‡∏±‡∏ß ‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô</div>
            <span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
          </div>

          <!-- Erythema multiforme -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp6" name="symptoms" value="Erythema multiforme (EM)" data-sev="moderate" />
            <div class="symptom-name">
              Erythema multiforme (EM)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π (target lesion)<br />
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤<br />
                  <strong>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (HSV) ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π ‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤</div>
            <span class="severity-badge severity-moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
          </div>

          <!-- SJS -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp7" name="symptoms" value="Stevens-Johnson Syndrome (SJS)" data-sev="emergency" />
            <div class="symptom-name">
              Stevens-Johnson Syndrome (SJS)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏<br />
                  <strong>‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞:</strong> ‡∏ï‡∏≤ ‡∏õ‡∏≤‡∏Å ‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÄ‡∏û‡∏®<br />
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡∏†‡∏≤‡∏ß‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏ - ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</span>
          </div>

          <!-- TEN -->
          <div class="symptom-card" onclick="toggleSymptomCard(this)">
            <input type="checkbox" id="symp8" name="symptoms" value="Toxic Epidermal Necrolysis (TEN)" data-sev="emergency" />
            <div class="symptom-name">
              Toxic Epidermal Necrolysis (TEN)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å &gt;30% ‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br />
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> Nikolsky's sign ‡∏ö‡∏ß‡∏Å<br />
                  <strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢:</strong> ‡∏™‡∏π‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏ô ICU/Burn unit
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å &gt;30% ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢‡∏™‡∏π‡∏á ICU/Burn unit</div>
            <span class="severity-badge severity-emergency">‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢!</span>
          </div>
        </div>

        <div class="legend">
          <div class="legend-item"><span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span></div>
          <div class="legend-item"><span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</span></div>
        </div>

        <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÄ‡∏≠‡∏á -->
        <div style="margin-top: 18px; background: white; border: 1px solid #e5e7eb; border-radius: 10px; padding: 14px;">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div>
              <div style="font-weight:600; color:#111827; font-size:16px;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Custom)</div>
              <div class="muted">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ (‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÉ‡∏î)</div>
            </div>
          </div>

          <div class="grid-2" style="margin-top: 12px;">
            <div class="form-group">
              <label for="customSymptomName">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£/‡∏ú‡∏∑‡πà‡∏ô:</label>
              <input type="text" id="customSymptomName" placeholder="‡πÄ‡∏ä‡πà‡∏ô Drug-induced pruritus / ‡∏ú‡∏∑‡πà‡∏ô‡∏Ñ‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏¢‡∏≤" />
            </div>
            <div class="form-group">
              <label for="customSymptomSeverity">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö):</label>
              <select id="customSymptomSeverity">
                <option value="mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢ (mild)</option>
                <option value="moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (moderate)</option>
                <option value="severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (severe)</option>
                <option value="emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ (emergency)</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="customSymptomDesc">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö):</label>
            <textarea id="customSymptomDesc" placeholder="‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ú‡∏∑‡πà‡∏ô/‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°/‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á..."></textarea>
          </div>

          <button type="button" class="secondary-btn" onclick="addCustomSymptom()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</button>
        </div>
      </div>

      <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢</h2>
        <div id="drugsContainer">
          <div class="drug-entry">
            <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà 1</div>
            <div class="form-group">
              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
              <input type="text" name="drugName[]" required />
            </div>
            <div class="form-group">
              <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
              <input type="date" name="drugDate[]" required />
            </div>
          </div>
        </div>
        <button type="button" class="add-btn" onclick="addDrugEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</button>
      </div>

      <!-- ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á -->
      <div class="section">
        <h2 class="section-title">‚ö†Ô∏è ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</h2>
        <div class="form-group">
          <select id="severity" name="severity" required>
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á --</option>
            <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Mild)</option>
            <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Moderate)</option>
            <option value="‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (Severe)</option>
            <option value="‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Life-threatening)</option>
          </select>
        </div>
      </div>

      <!-- Naranjo Algorithm Questions -->
      <div class="section">
        <h2 class="section-title">üìù ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô Naranjo Algorithm</h2>
        <div class="alert">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á 10 ‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</div>

        <!-- Q1 -->
        <div class="question">
          <div class="question-text">1. ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q1_yes" name="q1" value="‡πÉ‡∏ä‡πà" required />
              <label for="q1_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q1_no" name="q1" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q1_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q1_unknown" name="q1" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q1_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q2 -->
        <div class="question">
          <div class="question-text">2. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q2_yes" name="q2" value="‡πÉ‡∏ä‡πà" required />
              <label for="q2_yes">‡πÉ‡∏ä‡πà (+2)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q2_no" name="q2" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q2_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q2_unknown" name="q2" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q2_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q3 -->
        <div class="question">
          <div class="question-text">3. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q3_yes" name="q3" value="‡πÉ‡∏ä‡πà" required />
              <label for="q3_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q3_no" name="q3" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q3_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q3_unknown" name="q3" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q3_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q4 -->
        <div class="question">
          <div class="question-text">4. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏µ‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q4_yes" name="q4" value="‡πÉ‡∏ä‡πà" required />
              <label for="q4_yes">‡πÉ‡∏ä‡πà (+2)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q4_no" name="q4" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q4_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q4_unknown" name="q4" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q4_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q5 -->
        <div class="question">
          <div class="question-text">5. ‡∏°‡∏µ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q5_yes" name="q5" value="‡πÉ‡∏ä‡πà" required />
              <label for="q5_yes">‡πÉ‡∏ä‡πà (-1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q5_no" name="q5" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q5_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+2)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q5_unknown" name="q5" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q5_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q6 -->
        <div class="question">
          <div class="question-text">6. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏´‡∏•‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q6_yes" name="q6" value="‡πÉ‡∏ä‡πà" required />
              <label for="q6_yes">‡πÉ‡∏ä‡πà (-1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q6_no" name="q6" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q6_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q6_unknown" name="q6" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q6_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q7 -->
        <div class="question">
          <div class="question-text">7. ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏¢‡∏≤‡πÉ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q7_yes" name="q7" value="‡πÉ‡∏ä‡πà" required />
              <label for="q7_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q7_no" name="q7" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q7_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q7_unknown" name="q7" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q7_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q8 -->
        <div class="question">
          <div class="question-text">8. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≤‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q8_yes" name="q8" value="‡πÉ‡∏ä‡πà" required />
              <label for="q8_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q8_no" name="q8" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q8_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q8_unknown" name="q8" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q8_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q9 -->
        <div class="question">
          <div class="question-text">9. ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Ñ‡∏•‡∏∂‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q9_yes" name="q9" value="‡πÉ‡∏ä‡πà" required />
              <label for="q9_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q9_no" name="q9" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q9_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q9_unknown" name="q9" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q9_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>

        <!-- Q10 -->
        <div class="question">
          <div class="question-text">10. ‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="q10_yes" name="q10" value="‡πÉ‡∏ä‡πà" required />
              <label for="q10_yes">‡πÉ‡∏ä‡πà (+1)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q10_no" name="q10" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" />
              <label for="q10_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="q10_unknown" name="q10" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö" />
              <label for="q10_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label>
            </div>
          </div>
        </div>
      </div>

      <!-- ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£) -->
      <div class="section">
        <h2 class="section-title">üë©‚Äç‚öïÔ∏è ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£)</h2>
        <div class="grid-2">
          <div class="form-group">
            <label for="assessorName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô:</label>
            <input type="text" id="assessorName" name="assessorName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç" required />
          </div>
          <div class="form-group">
            <label for="assessorLicense">‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
            <input type="text" id="assessorLicense" name="assessorLicense" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†.12345 (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" />
          </div>
        </div>
        <div class="form-group">
          <label for="assessorNote">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
          <textarea id="assessorNote" name="assessorNote" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡πÄ‡∏î‡∏¥‡∏°/‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°/‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ó‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å"></textarea>
        </div>
      </div>

      <button type="submit" class="submit-btn">üìä ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•</button>
    </form>

    <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô -->
    <div id="result" class="result">
      <h2 class="result-title">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>

      <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Export PDF -->
      <div id="pdfArea">
        <div id="resultContent" class="result-content"></div>
      </div>

      <div class="result-actions">
        <button class="btn-print" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</button>
        <button class="btn-pdf" onclick="exportPDF()">üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô PDF</button>
      </div>
    </div>
  </div>

  <script>
    let drugCount = 1;
    let customSymptomCount = 0;

    // ========== Symptom Card Toggle (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö dynamic) ==========
    function toggleSymptomCard(card) {
      const checkbox = card.querySelector('input[type="checkbox"]');
      if (!checkbox) return;

      checkbox.checked = !checkbox.checked;
      card.classList.toggle("selected", checkbox.checked);
    }

    // ========== Add Custom Symptom ==========
    function addCustomSymptom() {
      const nameEl = document.getElementById("customSymptomName");
      const sevEl = document.getElementById("customSymptomSeverity");
      const descEl = document.getElementById("customSymptomDesc");

      const name = (nameEl.value || "").trim();
      const sev = sevEl.value; // mild/moderate/severe/emergency
      const desc = (descEl.value || "").trim();

      if (!name) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£/‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°");
        nameEl.focus();
        return;
      }

      customSymptomCount++;
      const symptomsGrid = document.getElementById("symptomsGrid");

      const id = `custom_symp_${customSymptomCount}`;
      const badge = severityBadgeLabel(sev);
      const badgeClass = severityBadgeClass(sev);
      const sevText = severityThai(sev);

      const card = document.createElement("div");
      card.className = "symptom-card";
      card.setAttribute("onclick", "toggleSymptomCard(this)");

      // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏Å‡πá‡∏ö data-sev ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à ‚Äú‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‚Äù ‡πÑ‡∏î‡πâ
      card.innerHTML = `
        <input type="checkbox" id="${id}" name="symptoms" value="${escapeHtml(name)}" data-sev="${sev}" />
        <div class="symptom-name">
          ${escapeHtml(name)}
          <span class="tooltip">
            <span class="info-icon">i</span>
            <span class="tooltiptext">
              <strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ${sevText}<br/>
              ${desc ? `<strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> ${escapeHtml(desc).replace(/\n/g, "<br/>")}` : `<span class="muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</span>`}
            </span>
          </span>
        </div>
        <div class="symptom-description">${desc ? escapeHtml(desc).replace(/\n/g, " ") : "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏á"}</div>
        <span class="severity-badge ${badgeClass}">${badge}</span>
      `;

      symptomsGrid.appendChild(card);

      // reset
      nameEl.value = "";
      descEl.value = "";
      sevEl.value = "mild";
    }

    function severityThai(sev) {
      if (sev === "emergency") return "‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢";
      if (sev === "severe") return "‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á";
      if (sev === "moderate") return "‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á";
      return "‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢";
    }

    function severityBadgeLabel(sev) {
      if (sev === "emergency") return "‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢";
      if (sev === "severe") return "‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á";
      if (sev === "moderate") return "‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á";
      return "‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢";
    }

    function severityBadgeClass(sev) {
      if (sev === "emergency") return "severity-emergency";
      if (sev === "severe") return "severity-severe";
      if (sev === "moderate") return "severity-moderate";
      return "severity-mild";
    }

    // ========== Drug Entries ==========
    function addDrugEntry() {
      drugCount++;
      const container = document.getElementById("drugsContainer");
      const newEntry = document.createElement("div");
      newEntry.className = "drug-entry";
      newEntry.innerHTML = `
        <button type="button" class="remove-btn" onclick="removeDrugEntry(this)">‚úñ ‡∏•‡∏ö</button>
        <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${drugCount}</div>
        <div class="form-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
          <input type="text" name="drugName[]" required />
        </div>
        <div class="form-group">
          <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
          <input type="date" name="drugDate[]" required />
        </div>
      `;
      container.appendChild(newEntry);
    }

    function removeDrugEntry(button) {
      if (document.querySelectorAll(".drug-entry").length > 1) {
        button.parentElement.remove();
        updateDrugNumbers();
      } else {
        alert("‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
      }
    }

    function updateDrugNumbers() {
      const entries = document.querySelectorAll(".drug-entry");
      entries.forEach((entry, index) => {
        entry.querySelector(".drug-entry-title").textContent = `‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${index + 1}`;
      });
      drugCount = entries.length;
    }

    // ========== Naranjo Algorithm Scoring ==========
    const SCORING = {
      1: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      2: { "‡πÉ‡∏ä‡πà": 2, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": -1, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      3: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      4: { "‡πÉ‡∏ä‡πà": 2, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": -1, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      5: { "‡πÉ‡∏ä‡πà": -1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 2, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      6: { "‡πÉ‡∏ä‡πà": -1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      7: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      8: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      9: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
      10: { "‡πÉ‡∏ä‡πà": 1, "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà": 0, "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö": 0 },
    };

    // ========== Submit Handler ==========
    document.getElementById("assessmentForm").addEventListener("submit", function (e) {
      e.preventDefault();

      // patient info
      const hn = document.getElementById("hn").value.trim();
      const firstName = document.getElementById("firstName").value.trim();
      const lastName = document.getElementById("lastName").value.trim();
      const phone = document.getElementById("phone").value.trim();

      // assessor
      const assessorName = document.getElementById("assessorName").value.trim();
      const assessorLicense = document.getElementById("assessorLicense").value.trim();
      const assessorNote = document.getElementById("assessorNote").value.trim();

      // symptoms (value + severity)
      const checkedSymptomInputs = Array.from(document.querySelectorAll('input[name="symptoms"]:checked'));
      const selectedSymptoms = checkedSymptomInputs.map((cb) => cb.value);
      const symptomsText = selectedSymptoms.length > 0 ? selectedSymptoms.join(", ") : "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";

      // Determine emergency symptom
      const hasEmergencySymptom = checkedSymptomInputs.some((cb) => {
        const v = (cb.value || "").toUpperCase();
        const sev = cb.getAttribute("data-sev") || "";
        return (
          sev === "emergency" ||
          v.includes("SJS") ||
          v.includes("TEN") ||
          v.includes("ANGIOEDEMA") ||
          v.includes("ANAPHYL") // ‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏≠‡∏á
        );
      });

      // drugs
      const drugNames = Array.from(document.querySelectorAll('input[name="drugName[]"]')).map((input) => input.value.trim());
      const drugDates = Array.from(document.querySelectorAll('input[name="drugDate[]"]')).map((input) => input.value);

      const drugsList = drugNames
        .map((name, i) => {
          const date = drugDates[i] ? formatDateThai(drugDates[i]) : "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà";
          return `${name || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤"} (${date})`;
        })
        .join(", ");

      // severity
      const severity = document.getElementById("severity").value;

      // score
      let score = 0;
      for (let i = 1; i <= 10; i++) {
        const checked = document.querySelector(`input[name="q${i}"]:checked`);
        const answer = checked ? checked.value : "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö";
        score += SCORING[i][answer] || 0;
      }

      // interpretation
      let interpretation = "";
      let interpretationColor = "";
      if (score >= 9) {
        interpretation = "‡πÉ‡∏ä‡πà‡πÅ‡∏ô‡πà (Definite)";
        interpretationColor = "#dc3545";
      } else if (score >= 5) {
        interpretation = "‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Probable)";
        interpretationColor = "#fd7e14";
      } else if (score >= 1) {
        interpretation = "‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏ä‡πà (Possible)";
        interpretationColor = "#ffc107";
      } else {
        interpretation = "‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Doubtful)";
        interpretationColor = "#28a745";
      }

      // Build result HTML (‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å export ‡πÄ‡∏õ‡πá‡∏ô PDF)
      const now = new Date();
      const generatedAt = formatDateTimeThai(now);

      const resultContent = document.getElementById("resultContent");
      resultContent.innerHTML = `
        <div style="background:white; padding:20px; border-radius:8px; margin-bottom:15px; text-align:left;">
          <h3 style="color:var(--primary); margin-bottom:12px;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
          <p><strong>HN:</strong> ${escapeHtml(hn)}</p>
          <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> ${escapeHtml(firstName)} ${escapeHtml(lastName)}</p>
          <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${escapeHtml(phone)}</p>
          <p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤/‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:</strong> ${escapeHtml(symptomsText)}</p>
          <p><strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô):</strong> ${escapeHtml(severity)}</p>
          <p><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢:</strong> ${escapeHtml(drugsList)}</p>
          <p class="muted" style="margin-top:10px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${escapeHtml(generatedAt)}</p>
        </div>

        <div class="score-box">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo: ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>

        <div style="background:${interpretationColor}; color:white; padding:18px; border-radius:8px; font-size:20px; font-weight:700; text-align:center;">
          ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: ${escapeHtml(interpretation)}
        </div>

        <div style="margin-top:16px; padding:15px; background:#f8f9fa; border-radius:8px; text-align:left;">
          <h4 style="color:var(--primary); margin-bottom:10px;">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∞‡∏ö‡∏ö)</h4>
          <ul style="line-height:1.8; color:#333; padding-left:18px;">
            <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô/‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</li>
            <li>‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏ ‚Äú‡∏¢‡∏≤‡∏ó‡∏î‡πÅ‡∏ó‡∏ô‚Äù</li>
            <li>‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô (differential diagnosis) ‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏£‡πà‡∏ß‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠, ‡πÇ‡∏£‡∏Ñ‡∏£‡πà‡∏ß‡∏°)</li>
            <li>‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á/‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå/‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå</li>
            ${hasEmergencySymptom ? `<li style="color:#b91c1c; font-weight:800;">‚ö†Ô∏è ‡∏û‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£/‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!</li>` : ``}
          </ul>
          <div class="muted" style="margin-top:10px;">
            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‚Äù ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏¢‡∏≤-‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÇ‡∏î‡∏¢‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
          </div>
        </div>

        <div style="background:white; padding:20px; border-radius:8px; margin-top:15px; text-align:left; border:1px solid #e5e7eb;">
          <h3 style="color:var(--primary); margin-bottom:12px;">‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£)</h3>
          <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> ${escapeHtml(assessorName)}</p>
          <p><strong>‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï:</strong> ${assessorLicense ? escapeHtml(assessorLicense) : "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"}</p>
          <p><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô:</strong> ${assessorNote ? escapeHtml(assessorNote).replace(/\n/g, "<br/>") : "‡πÑ‡∏°‡πà‡∏°‡∏µ"}</p>
        </div>

        <div class="footer-note">
          ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÇ‡∏î‡∏¢ ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà
          <strong>bunnasornt@gmail.com</strong>
        </div>
      `;

      document.getElementById("result").classList.add("show");
      document.getElementById("result").scrollIntoView({ behavior: "smooth" });
    });

    // ========== PDF Export ==========
    async function exportPDF() {
      // ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤ font ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏±‡∏ö html2canvas)
      await document.fonts.ready;

      const pdfArea = document.getElementById("pdfArea");

      // ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å HN + ‡πÄ‡∏ß‡∏•‡∏≤
      const hn = (document.getElementById("hn").value || "HN").trim().replace(/\s+/g, "_");
      const ts = new Date();
      const fileName = `ADR_Naranjo_${hn}_${ts.getFullYear()}-${pad2(ts.getMonth() + 1)}-${pad2(ts.getDate())}_${pad2(ts.getHours())}${pad2(ts.getMinutes())}.pdf`;

      const options = {
        margin: [10, 10, 10, 10], // mm (‡∏ö‡∏ô ‡∏Ç‡∏ß‡∏≤ ‡∏•‡πà‡∏≤‡∏á ‡∏ã‡πâ‡∏≤‡∏¢)
        filename: fileName,
        image: { type: "jpeg", quality: 0.98 },
        html2canvas: {
          scale: 2,
          useCORS: true,
          backgroundColor: "#ffffff",
          letterRendering: true,
        },
        jsPDF: { unit: "mm", format: "a4", orientation: "portrait" },
        pagebreak: { mode: ["css", "legacy"] },
      };

      try {
        // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà export
        const prevFont = pdfArea.style.fontFamily;
        pdfArea.style.fontFamily = 'SarabunNew, Sarabun, sans-serif';

        await html2pdf().set(options).from(pdfArea).save();

        pdfArea.style.fontFamily = prevFont;
      } catch (err) {
        console.error(err);
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ Chrome/Edge ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)");
      }
    }

    // ========== Utilities ==========
    function escapeHtml(str) {
      return String(str || "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function pad2(n) {
      return String(n).padStart(2, "0");
    }

    function formatDateThai(yyyy_mm_dd) {
      // input: 2025-12-27
      const parts = String(yyyy_mm_dd || "").split("-");
      if (parts.length !== 3) return "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà";
      const [y, m, d] = parts.map((x) => parseInt(x, 10));
      if (!y || !m || !d) return "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà";
      // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô dd/mm/yyyy (‡∏Ñ‡∏á Gregorian ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÉ‡∏ô‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢)
      return `${pad2(d)}/${pad2(m)}/${y}`;
    }

    function formatDateTimeThai(dateObj) {
      const d = dateObj;
      const day = pad2(d.getDate());
      const mon = pad2(d.getMonth() + 1);
      const yr = d.getFullYear();
      const hh = pad2(d.getHours());
      const mm = pad2(d.getMinutes());
      return `${day}/${mon}/${yr} ${hh}:${mm} ‡∏ô.`;
    }

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ checkbox (‡∏Å‡∏£‡∏ì‡∏µ browser restore)
    window.addEventListener("load", () => {
      document.querySelectorAll(".symptom-card").forEach((card) => {
        const cb = card.querySelector('input[type="checkbox"]');
        if (cb && cb.checked) card.classList.add("selected");
      });
    });
  </script>
</body>
</html>
