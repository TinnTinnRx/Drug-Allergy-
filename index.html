<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ - Naranjo Algorithm</title>

  <!-- Sarabun (TH Sarabun New) via Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Sarabun', 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      padding: 30px;
    }

    h1 { color: #667eea; text-align: center; margin-bottom: 10px; font-size: 28px; }
    .subtitle { text-align: center; color: #666; margin-bottom: 30px;font-size: 24px; }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border-left: 4px solid #667eea;
    }

    .section-title { color: #333; font-size: 28px; margin-bottom: 15px; font-weight: 600; }

    .form-group { margin-bottom: 15px; }
    label { display: block; margin-bottom: 5px; color: #555; font-weight: 500; }

    input[type="text"],
    input[type="date"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 36px;
      transition: border-color 0.3s;
      font-family: inherit;
    }

    textarea { min-height: 80px; resize: vertical; }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .drug-entry {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      position: relative;
    }

    .drug-entry-title { font-weight: 600; color: #667eea; margin-bottom: 10px; }

    .add-btn, .remove-btn, .submit-btn, .pdf-btn, .reset-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 36px;
      font-weight: 500;
      transition: all 0.3s;
      font-family: inherit;
    }

    .add-btn { background: #28a745; color: white; margin-top: 10px; }
    .add-btn:hover { background: #218838; }

    .remove-btn {
      background: #dc3545;
      color: white;
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 5px 15px;
     font-size: 24px;
    }
    .remove-btn:hover { background: #c82333; }

    .submit-btn {
      background: #667eea;
      color: white;
      width: 100%;
      padding: 15px;
      font-size: 22px;
      margin-top: 20px;
    }
    .submit-btn:hover { background: #5568d3; }

    .question {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .question-text { font-weight: 500; margin-bottom: 10px; color: #333; }

    .radio-group { display: flex; gap: 20px; flex-wrap: wrap; }
    .radio-option { display: flex; align-items: center; gap: 5px; }
    .radio-option input[type="radio"] { width: auto; cursor: pointer; }
    .radio-option label { margin: 0; cursor: pointer; font-weight: normal; }

    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 12px;
    }

    .symptom-card {
      background: white;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #ddd;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
    }
    .symptom-card:hover {
      border-color: #667eea;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
    }
    .symptom-card.selected { border-color: #667eea; background: #e7f3ff; }
    .symptom-card input[type="checkbox"] { position: absolute; opacity: 0; }

    .symptom-name {
      font-weight: 600; color: #333; margin-bottom: 5px;
      display: flex; align-items: center; gap: 8px;
    }
    .symptom-name::before { content: "‚òê"; font-size: 36px; color: #999; }
    .symptom-card.selected .symptom-name::before { content: "‚òë"; color: #667eea; }

    .symptom-description { font-size: 18px; color: #666; line-height: 1.4; }

    .severity-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      margin-top: 5px;
    }
    .severity-mild { background: #d4edda; color: #155724; }
    .severity-moderate { background: #fff3cd; color: #856404; }
    .severity-severe { background: #f8d7da; color: #721c24; }
    .severity-emergency { background: #dc3545; color: white; }

    .info-icon {
      display: inline-block;
      width: 16px; height: 16px;
      background: #667eea;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 16px;
      font-size: 22px;
      cursor: help;
      margin-left: 5px;
    }

    .tooltip { position: relative; display: inline-block; }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 300px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -150px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 18px;
      line-height: 1.6;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

    .result {
      display: none;
      background: #e7f3ff;
      padding: 25px;
      border-radius: 10px;
      margin-top: 30px;
      border: 2px solid #667eea;
    }
    .result.show { display: block; }

    .result-title { color: #667eea; font-size: 24px; margin-bottom: 15px; text-align: center; }
    .result-content { font-size: 22px; color: #333; text-align: center; }

    .score-box {
      background: #667eea;
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      font-size: 36px;
      font-weight: 600;
    }

    .patient-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .alert {
      background: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 12px;
      border-radius: 5px;
      margin-bottom: 15px;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
      padding: 10px;
      background: white;
      border-radius: 5px;
      font-size: 22px;
    }

    .legend-item { display: flex; align-items: center; gap: 5px; }

    .custom-symptom-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }

    .footer-note {
      margin-top: 20px;
      font-size: 22px;
      color: #555;
      text-align: center;
      line-height: 1.6;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }

    .action-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }

    .pdf-btn {
      background: #0d6efd;
      color: white;
      padding: 10px 18px;
    }
    .pdf-btn:hover { background: #0b5ed7; }

    .reset-btn {
      background: #6c757d;
      color: white;
      padding: 10px 18px;
    }
    .reset-btn:hover { background: #5c636a; }

    @media (max-width: 768px) {
      .checkbox-grid { grid-template-columns: 1fr; }
      .patient-info { grid-template-columns: 1fr; }
      .custom-symptom-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üè• ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h1>
    <p class="subtitle">Naranjo Adverse Drug Reaction Probability Scale</p>

    <form id="assessmentForm">
      <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
        <div class="patient-info">
          <div class="form-group">
            <label for="hn">HN:</label>
            <input type="text" id="hn" name="hn" required>
          </div>
          <div class="form-group">
            <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠:</label>
            <input type="text" id="firstName" name="firstName" required>
          </div>
          <div class="form-group">
            <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <input type="text" id="lastName" name="lastName" required>
          </div>
          <div class="form-group">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
            <input type="text" id="phone" name="phone" required>
          </div>
        </div>
      </div>

      <!-- ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h2>
        <div class="alert">
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠) - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
        </div>

        <div class="checkbox-grid" id="symptomsGrid">
          <!-- Maculopapular rash -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp1')">
            <input type="checkbox" id="symp1" name="symptoms" value="Maculopapular rash (MP rash)">
            <div class="symptom-name">
              Maculopapular rash (MP rash)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô<br>
                  <strong>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢:</strong> ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£ 2 ‡∏Ç‡πâ‡∏≤‡∏á<br>
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡πÑ‡∏Ç‡πâ ‡∏Ñ‡∏±‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô - ‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
            <span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
          </div>

          <!-- Urticaria -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp2')">
            <input type="checkbox" id="symp2" name="symptoms" value="Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)">
            <div class="symptom-name">
              Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡πÄ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.<br>
                  <strong>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong> ‡∏≠‡∏≤‡∏à‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏õ‡πá‡∏ô anaphylaxis
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î ‡∏Ñ‡∏±‡∏ô‡∏°‡∏≤‡∏Å ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.</div>
            <span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á</span>
          </div>

          <!-- Angioedema -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp3')">
            <input type="checkbox" id="symp3" name="symptoms" value="Angioedema">
            <div class="symptom-name">
              Angioedema
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á<br>
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡∏£‡∏¥‡∏°‡∏ù‡∏µ‡∏õ‡∏≤‡∏Å ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏≠‡∏≤‡∏à‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö anaphylactic shock
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏õ‡∏≤‡∏Å ‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</span>
          </div>

          <!-- Fixed Drug Eruption -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp4')">
            <input type="checkbox" id="symp4" name="symptoms" value="Fixed Drug Eruption">
            <div class="symptom-name">
              Fixed Drug Eruption
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏Ñ‡∏•‡πâ‡∏≥/‡∏°‡πà‡∏ß‡∏á<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏â‡∏û‡∏≤‡∏∞:</strong> ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°<br>
                  <strong>‡∏´‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏¢:</strong> ‡∏°‡∏±‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡∏Ñ‡∏•‡πâ‡∏≥ ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏° ‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥</div>
            <span class="severity-badge severity-mild">‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span>
          </div>

          <!-- Exfoliative dermatitis -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp5')">
            <input type="checkbox" id="symp5" name="symptoms" value="Exfoliative dermatitis">
            <div class="symptom-name">
              Exfoliative dermatitis
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br>
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Ñ‡∏±‡∏ô ‡πÅ‡∏´‡πâ‡∏á ‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏†‡∏≤‡∏ß‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ã‡πâ‡∏≠‡∏ô
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏ï‡∏±‡∏ß ‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô</div>
            <span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
          </div>

          <!-- Erythema multiforme -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp6')">
            <input type="checkbox" id="symp6" name="symptoms" value="Erythema multiforme (EM)">
            <div class="symptom-name">
              Erythema multiforme (EM)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π (target lesion)<br>
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤<br>
                  <strong>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (HSV) ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π ‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤</div>
            <span class="severity-badge severity-moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
          </div>

          <!-- SJS -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp7')">
            <input type="checkbox" id="symp7" name="symptoms" value="Stevens-Johnson Syndrome (SJS)">
            <div class="symptom-name">
              Stevens-Johnson Syndrome (SJS)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏<br>
                  <strong>‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞:</strong> ‡∏ï‡∏≤ ‡∏õ‡∏≤‡∏Å ‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÄ‡∏û‡∏®<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡∏†‡∏≤‡∏ß‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏ - ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</span>
          </div>

          <!-- TEN -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp8')">
            <input type="checkbox" id="symp8" name="symptoms" value="Toxic Epidermal Necrolysis (TEN)">
            <div class="symptom-name">
              Toxic Epidermal Necrolysis (TEN)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å >30% ‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> Nikolsky's sign ‡∏ö‡∏ß‡∏Å<br>
                  <strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢:</strong> ‡∏™‡∏π‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏ô ICU/Burn unit
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å >30% ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢‡∏™‡∏π‡∏á ICU/Burn unit</div>
            <span class="severity-badge severity-emergency">‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢!</span>
          </div>
        </div>

        <div class="legend">
          <div class="legend-item"><span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span></div>
          <div class="legend-item"><span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</span></div>
        </div>

        <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á -->
        <div style="margin-top: 18px; background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #e6e6e6;">
          <h3 style="color:#667eea; margin-bottom: 10px; font-size: 36px;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)</h3>
          <div class="custom-symptom-grid">
            <div class="form-group">
              <label for="customSymptomName">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£/‡∏ú‡∏∑‡πà‡∏ô:</label>
              <input type="text" id="customSymptomName" placeholder="‡πÄ‡∏ä‡πà‡∏ô Pruritus without rash">
            </div>
            <div class="form-group">
              <label for="customSymptomSeverity">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö:</label>
              <select id="customSymptomSeverity">
                <option value="mild">‡∏ö‡πà‡∏≠‡∏¢/‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</option>
                <option value="moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                <option value="severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</option>
                <option value="emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</option>
              </select>
            </div>
            <div class="form-group" style="grid-column: 1 / -1;">
              <label for="customSymptomDesc">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</label>
              <textarea id="customSymptomDesc" placeholder="‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞, ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢, ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á ‡∏Ø‡∏•‡∏Ø"></textarea>
            </div>
          </div>
          <button type="button" class="add-btn" onclick="addCustomSymptom()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</button>
          <div style="margin-top: 10px; font-size: 22px; color: #666;">
            * ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö‡∏£‡∏ß‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏• (‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo ‡∏ã‡∏∂‡πà‡∏á‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡πá‡∏ô 10 ‡∏Ç‡πâ‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô)
          </div>
        </div>
      </div>

      <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢</h2>
        <div id="drugsContainer">
          <div class="drug-entry">
            <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà 1</div>
            <div class="form-group">
              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
              <input type="text" name="drugName[]" required>
            </div>
            <div class="form-group">
              <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
              <input type="date" name="drugDate[]" required>
            </div>
          </div>
        </div>
        <button type="button" class="add-btn" onclick="addDrugEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</button>
      </div>

      <!-- ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á -->
      <div class="section">
        <h2 class="section-title">‚ö†Ô∏è ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</h2>
        <div class="form-group">
          <select id="severity" name="severity" required>
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á --</option>
            <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Mild)</option>
            <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Moderate)</option>
            <option value="‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (Severe)</option>
            <option value="‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Life-threatening)</option>
          </select>
        </div>
      </div>

      <!-- ‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô -->
      <div class="section">
        <h2 class="section-title">üë©‚Äç‚öïÔ∏è ‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>
        <div class="patient-info">
          <div class="form-group">
            <label for="assessorName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô:</label>
            <input type="text" id="assessorName" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†‡∏Å. ...">
          </div>
          <div class="form-group">
            <label for="assessorLicense">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
            <input type="text" id="assessorLicense" placeholder="Optional">
          </div>
        </div>
      </div>

      <!-- Naranjo Algorithm Questions -->
      <div class="section">
        <h2 class="section-title">üìù ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô Naranjo Algorithm</h2>
        <div class="alert">
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á 10 ‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ (‡∏™‡πÄ‡∏Å‡∏• Naranjo ‡πÅ‡∏õ‡∏•‡∏ú‡∏•: ‚â•9 Definite, 5‚Äì8 Probable, 1‚Äì4 Possible, ‚â§0 Doubtful) :contentReference[oaicite:2]{index=2}
        </div>

        <!-- Q1 - Q10 (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) -->
        <div class="question">
          <div class="question-text">1. ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q1_yes" name="q1" value="‡πÉ‡∏ä‡πà" required><label for="q1_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q1_no" name="q1" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q1_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q1_unknown" name="q1" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q1_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">2. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q2_yes" name="q2" value="‡πÉ‡∏ä‡πà" required><label for="q2_yes">‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q2_no" name="q2" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q2_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q2_unknown" name="q2" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q2_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">3. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q3_yes" name="q3" value="‡πÉ‡∏ä‡πà" required><label for="q3_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q3_no" name="q3" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q3_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q3_unknown" name="q3" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q3_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">4. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏µ‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q4_yes" name="q4" value="‡πÉ‡∏ä‡πà" required><label for="q4_yes">‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q4_no" name="q4" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q4_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q4_unknown" name="q4" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q4_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">5. ‡∏°‡∏µ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q5_yes" name="q5" value="‡πÉ‡∏ä‡πà" required><label for="q5_yes">‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q5_no" name="q5" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q5_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q5_unknown" name="q5" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q5_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">6. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏´‡∏•‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q6_yes" name="q6" value="‡πÉ‡∏ä‡πà" required><label for="q6_yes">‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q6_no" name="q6" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q6_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q6_unknown" name="q6" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q6_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">7. ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏¢‡∏≤‡πÉ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q7_yes" name="q7" value="‡πÉ‡∏ä‡πà" required><label for="q7_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q7_no" name="q7" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q7_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q7_unknown" name="q7" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q7_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">8. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≤‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q8_yes" name="q8" value="‡πÉ‡∏ä‡πà" required><label for="q8_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q8_no" name="q8" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q8_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q8_unknown" name="q8" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q8_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">9. ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Ñ‡∏•‡∏∂‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q9_yes" name="q9" value="‡πÉ‡∏ä‡πà" required><label for="q9_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q9_no" name="q9" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q9_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q9_unknown" name="q9" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q9_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">10. ‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q10_yes" name="q10" value="‡πÉ‡∏ä‡πà" required><label for="q10_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q10_no" name="q10" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q10_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q10_unknown" name="q10" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q10_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>
      </div>

      <button type="submit" class="submit-btn">üìä ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•</button>
    </form>

    <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô -->
    <div id="result" class="result">
      <h2 class="result-title">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>

      <!-- ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô PDF -->
      <div id="reportArea"></div>

      <div class="action-row">
        <button type="button" class="pdf-btn" onclick="printReportOnly()">üñ®Ô∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô PDF</button>
        <button type="button" class="reset-btn" onclick="resetAll()">üîÑ Reset</button>
      </div>
    </div>

    <div class="footer-note">
      ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÇ‡∏î‡∏¢ ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà bunnasornt@gmail.com
    </div>
  </div>

  <script>
    let drugCount = 1;
    let customSymptomCount = 0;

    function toggleSymptom(card, checkboxId) {
      const checkbox = document.getElementById(checkboxId);
      checkbox.checked = !checkbox.checked;
      card.classList.toggle('selected', checkbox.checked);
    }

    function addDrugEntry() {
      drugCount++;
      const container = document.getElementById('drugsContainer');
      const newEntry = document.createElement('div');
      newEntry.className = 'drug-entry';
      newEntry.innerHTML = `
        <button type="button" class="remove-btn" onclick="removeDrugEntry(this)">‚úñ ‡∏•‡∏ö</button>
        <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${drugCount}</div>
        <div class="form-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
          <input type="text" name="drugName[]" required>
        </div>
        <div class="form-group">
          <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
          <input type="date" name="drugDate[]" required>
        </div>
      `;
      container.appendChild(newEntry);
    }

    function removeDrugEntry(button) {
      if (document.querySelectorAll('.drug-entry').length > 1) {
        button.parentElement.remove();
        updateDrugNumbers();
      } else {
        alert('‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
      }
    }

    function updateDrugNumbers() {
      const entries = document.querySelectorAll('.drug-entry');
      entries.forEach((entry, index) => {
        entry.querySelector('.drug-entry-title').textContent = `‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${index + 1}`;
      });
      drugCount = entries.length;
    }

    function addCustomSymptom() {
      const name = document.getElementById('customSymptomName').value.trim();
      const desc = document.getElementById('customSymptomDesc').value.trim();
      const sev = document.getElementById('customSymptomSeverity').value;

      if (!name) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£/‡∏ú‡∏∑‡πà‡∏ô');
        return;
      }

      customSymptomCount++;
      const id = `customSymp${customSymptomCount}`;

      let badgeClass = 'severity-mild';
      let badgeText = '‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢';
      if (sev === 'moderate') { badgeClass = 'severity-moderate'; badgeText = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á'; }
      if (sev === 'severe') { badgeClass = 'severity-severe'; badgeText = '‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á'; }
      if (sev === 'emergency') { badgeClass = 'severity-emergency'; badgeText = '‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô'; }

      const grid = document.getElementById('symptomsGrid');
      const card = document.createElement('div');
      card.className = 'symptom-card';
      card.setAttribute('onclick', `toggleSymptom(this, '${id}')`);
      card.innerHTML = `
        <input type="checkbox" id="${id}" name="symptoms" value="${escapeHtml(name)}">
        <div class="symptom-name">${escapeHtml(name)}</div>
        <div class="symptom-description">${desc ? escapeHtml(desc) : '‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏á'}</div>
        <span class="severity-badge ${badgeClass}">${badgeText}</span>
      `;
      grid.appendChild(card);

      // clear inputs
      document.getElementById('customSymptomName').value = '';
      document.getElementById('customSymptomDesc').value = '';
      document.getElementById('customSymptomSeverity').value = 'mild';
    }

    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, function(m) {
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]);
      });
    }

    // Naranjo Algorithm Scoring
    const SCORING = {
      1: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      2: { '‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      3: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      4: { '‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      5: { '‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      6: { '‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      7: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      8: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      9: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      10:{ '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 }
    };

    document.getElementById('assessmentForm').addEventListener('submit', function(e) {
      e.preventDefault();

      // Patient info
      const hn = document.getElementById('hn').value.trim();
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const phone = document.getElementById('phone').value.trim();

      // Assessor
      const assessorName = document.getElementById('assessorName').value.trim();
      const assessorLicense = document.getElementById('assessorLicense').value.trim();

      // Symptoms
      const selectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked'))
        .map(cb => cb.value);
      const symptomsText = selectedSymptoms.length > 0 ? selectedSymptoms.join(', ') : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';

      // Drugs
      const drugNames = Array.from(document.querySelectorAll('input[name="drugName[]"]')).map(i => i.value.trim());
      const drugDates = Array.from(document.querySelectorAll('input[name="drugDate[]"]')).map(i => i.value);
      const drugsList = drugNames.map((name, i) => `${name || '-'} (${drugDates[i] || '-'})`).join(', ');

      // Severity
      const severity = document.getElementById('severity').value;

      // Calculate Naranjo score
      let score = 0;
      for (let i = 1; i <= 10; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        const answer = selected ? selected.value : '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö';
        score += (SCORING[i][answer] || 0);
      }

      // Interpret
      let interpretation = "";
      let interpretationColor = "";
      if (score >= 9) { interpretation = "‡πÉ‡∏ä‡πà‡πÅ‡∏ô‡πà (Definite)"; interpretationColor = "#dc3545"; }
      else if (score >= 5) { interpretation = "‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Probable)"; interpretationColor = "#fd7e14"; }
      else if (score >= 1) { interpretation = "‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏ä‡πà (Possible)"; interpretationColor = "#ffc107"; }
      else { interpretation = "‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Doubtful)"; interpretationColor = "#28a745"; }

      const isEmergency = selectedSymptoms.some(s =>
        s.includes('SJS') || s.includes('TEN') || s.includes('Angioedema')
      );

      // Render report (ONLY this will be printed to PDF)
      const reportArea = document.getElementById('reportArea');
      reportArea.innerHTML = `
        <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px; text-align:left;">
          <h3 style="color: #667eea; margin-bottom: 12px;">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ (Naranjo)</h3>

          <div style="margin-bottom: 12px;">
            <strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</strong><br>
            HN: ${escapeHtml(hn)}<br>
            ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•: ${escapeHtml(firstName)} ${escapeHtml(lastName)}<br>
            ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${escapeHtml(phone)}<br>
          </div>

          <div style="margin-bottom: 12px;">
            <strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</strong><br>
            ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô/‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤: ${escapeHtml(symptomsText)}<br>
            ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á: ${escapeHtml(severity)}<br>
            ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢: ${escapeHtml(drugsList)}<br>
          </div>

          <div style="margin-bottom: 12px;">
            <strong>‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</strong><br>
            ‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: ${escapeHtml(assessorName)}${assessorLicense ? ` (‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï: ${escapeHtml(assessorLicense)})` : ''}<br>
            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${new Date().toLocaleString('th-TH')}
          </div>
        </div>

        <div style="background:#667eea;color:#fff;padding:14px;border-radius:8px;text-align:center;font-size:18px;font-weight:700;">
          ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo: ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        </div>

        <div style="margin-top:12px;background:${interpretationColor};color:#fff;padding:16px;border-radius:8px;font-size:20px;font-weight:700;text-align:center;">
          ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: ${escapeHtml(interpretation)}
        </div>

        <div style="margin-top: 16px; padding: 14px; background: #f8f9fa; border-radius: 8px; text-align:left;">
          <h4 style="color: #667eea; margin-bottom: 8px;">‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥</h4>
          <ul style="line-height: 1.8; color: #333; padding-left: 18px;">
            <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö/‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</li>
            <li>‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</li>
            <li>‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠/‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</li>
            <li>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏à‡∏≤‡∏Å‡∏¢‡∏≤ (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á) ‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</li>
            ${isEmergency ? `<li style="color:#b00020;font-weight:800;">‚ö†Ô∏è ‡∏û‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô (‡πÄ‡∏ä‡πà‡∏ô SJS/TEN/Angioedema) ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>` : ''}
          </ul>
          <div style="margin-top:10px;font-size:12px;color:#555;">
            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á ADR/‡πÅ‡∏û‡πâ‡∏¢‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ö‡∏ö‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏î‡∏∏‡∏•‡∏¢‡∏û‡∏¥‡∏ô‡∏¥‡∏à‡∏ó‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å :contentReference[oaicite:3]{index=3}
          </div>
        </div>
      `;

      document.getElementById('result').classList.add('show');
      document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
    });

    // Print ONLY reportArea (recommended on GitHub Pages; avoids jsPDF/html2canvas failures)
    function printReportOnly() {
      const reportArea = document.getElementById('reportArea');
      if (!reportArea || !reportArea.innerHTML.trim()) {
        alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î "‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•" ‡∏Å‡πà‡∏≠‡∏ô');
        return;
      }

      const w = window.open('', '_blank');
      if (!w) {
        alert('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï pop-up ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà');
        return;
      }

      // Build print-only HTML
      const html = `
        <!DOCTYPE html>
        <html lang="th">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ (PDF)</title>
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
          <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
          <style>
            body { font-family: 'Sarabun', sans-serif; background: #fff; margin: 0; padding: 18px; }
            @page { size: A4; margin: 12mm; }
            .footer-note { margin-top: 14px; font-size: 16px; color: #555; line-height: 1.6; border-top: 1px solid #eee; padding-top: 8px; }
            /* ensure colors print */
            * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          </style>
        </head>
        <body>
          ${reportArea.innerHTML}
          <div class="footer-note">
            ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÇ‡∏î‡∏¢ ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà bunnasornt@gmail.com
          </div>
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
              }, 300);
            }
          </script>
        </body>
        </html>
      `;

      w.document.open();
      w.document.write(html);
      w.document.close();
    }

    function resetAll() {
      // reset form
      const form = document.getElementById('assessmentForm');
      form.reset();

      // remove extra drug entries
      const container = document.getElementById('drugsContainer');
      const entries = Array.from(container.querySelectorAll('.drug-entry'));
      entries.slice(1).forEach(e => e.remove());
      drugCount = 1;
      updateDrugNumbers();

      // uncheck symptoms and remove selected class
      document.querySelectorAll('input[name="symptoms"]').forEach(cb => cb.checked = false);
      document.querySelectorAll('.symptom-card').forEach(card => card.classList.remove('selected'));

      // clear report + hide result
      document.getElementById('reportArea').innerHTML = '';
      document.getElementById('result').classList.remove('show');

      // scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>
