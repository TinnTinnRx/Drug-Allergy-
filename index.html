<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤ - Naranjo Algorithm</title>

  <!-- Sarabun (TH Sarabun New) from Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- html2pdf (bundles html2canvas + jsPDF) -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    /* -------- Base Reset -------- */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* -------- Font Setup (SarabunNew alias) -------- */
    :root{
      --brand: #667eea;
      --brand2: #764ba2;
      --text: #2b2b2b;
      --muted: #666;
      --bg: #f6f7fb;

      /* Comfortable font sizes */
      --fs-base: 16px;
      --fs-sm: 14px;
      --fs-xs: 12.5px;
      --fs-h1: 30px;
      --fs-h2: 20px;
      --fs-h3: 18px;
      --radius: 14px;
    }

    /* Make Sarabun act as "SarabunNew" for the page */
    body {
      font-family: "SarabunNew", "Sarabun", "Segoe UI", Tahoma, sans-serif;
      font-size: var(--fs-base);
      line-height: 1.6;
      color: var(--text);
      background: linear-gradient(135deg, var(--brand) 0%, var(--brand2) 100%);
      min-height: 100vh;
      padding: 20px;
    }

    /* Alias font-family name */
    @font-face {
      font-family: "SarabunNew";
      src: local("Sarabun");
      font-style: normal;
      font-weight: 400;
    }

    .container {
      max-width: 1050px;
      margin: 0 auto;
      background: white;
      border-radius: var(--radius);
      box-shadow: 0 10px 40px rgba(0,0,0,0.18);
      padding: 28px;
    }

    h1 {
      color: var(--brand);
      text-align: center;
      margin-bottom: 6px;
      font-size: var(--fs-h1);
      letter-spacing: 0.2px;
    }

    .subtitle {
      text-align: center;
      color: var(--muted);
      margin-bottom: 22px;
      font-size: var(--fs-sm);
    }

    .section {
      margin-bottom: 22px;
      padding: 18px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid var(--brand);
    }

    .section-title {
      color: #333;
      font-size: var(--fs-h2);
      margin-bottom: 12px;
      font-weight: 700;
    }

    .form-group { margin-bottom: 14px; }

    label {
      display: block;
      margin-bottom: 6px;
      color: #444;
      font-weight: 600;
      font-size: 15px;
    }

    input[type="text"], input[type="date"], select, textarea {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #e1e1e1;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.2s, box-shadow 0.2s;
      background: white;
      font-family: "SarabunNew", "Sarabun", sans-serif;
    }

    textarea { min-height: 70px; resize: vertical; }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(102,126,234,0.15);
    }

    .patient-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }

    .alert {
      background: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 12px 14px;
      border-radius: 10px;
      margin-bottom: 12px;
      font-size: var(--fs-sm);
    }

    /* -------- Drugs -------- */
    .drug-entry {
      background: white;
      padding: 14px;
      margin-bottom: 10px;
      border-radius: 12px;
      border: 1px solid #e6e6e6;
      position: relative;
    }

    .drug-entry-title {
      font-weight: 700;
      color: var(--brand);
      margin-bottom: 10px;
      font-size: 16px;
    }

    /* -------- Buttons -------- */
    .btn-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .add-btn, .remove-btn, .submit-btn, .secondary-btn {
      padding: 10px 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 700;
      transition: transform 0.05s, background 0.2s, opacity 0.2s;
      font-family: "SarabunNew", "Sarabun", sans-serif;
    }

    .add-btn { background: #28a745; color: white; }
    .add-btn:hover { background: #218838; }

    .secondary-btn { background: #343a40; color: white; }
    .secondary-btn:hover { background: #23272b; }

    .remove-btn {
      background: #dc3545;
      color: white;
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 6px 12px;
      font-size: 14px;
      border-radius: 10px;
    }
    .remove-btn:hover { background: #c82333; }

    .submit-btn {
      background: var(--brand);
      color: white;
      width: 100%;
      padding: 14px;
      font-size: 18px;
      margin-top: 10px;
    }
    .submit-btn:hover { background: #5568d3; }
    .add-btn:active, .secondary-btn:active, .submit-btn:active, .remove-btn:active { transform: translateY(1px); }

    /* -------- Questions -------- */
    .question {
      background: white;
      padding: 14px;
      margin-bottom: 12px;
      border-radius: 12px;
      border: 1px solid #e6e6e6;
    }
    .question-text {
      font-weight: 700;
      margin-bottom: 10px;
      color: #333;
      font-size: 16px;
    }
    .radio-group {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
    }
    .radio-option {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 15px;
    }
    .radio-option input[type="radio"] { cursor: pointer; }

    /* -------- Symptoms Grid -------- */
    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(285px, 1fr));
      gap: 12px;
    }

    .symptom-card {
      background: white;
      padding: 12px;
      border-radius: 12px;
      border: 2px solid #e1e1e1;
      cursor: pointer;
      transition: box-shadow 0.2s, border-color 0.2s, background 0.2s;
      position: relative;
    }

    .symptom-card:hover {
      border-color: var(--brand);
      box-shadow: 0 2px 10px rgba(102,126,234,0.18);
    }

    .symptom-card.selected {
      border-color: var(--brand);
      background: #eaf1ff;
    }

    .symptom-card input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .symptom-name {
      font-weight: 800;
      color: #333;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
    }

    .symptom-name::before {
      content: "‚òê";
      font-size: 20px;
      color: #999;
      line-height: 1;
    }

    .symptom-card.selected .symptom-name::before {
      content: "‚òë";
      color: var(--brand);
    }

    .symptom-description {
      font-size: var(--fs-sm);
      color: #555;
      line-height: 1.45;
      margin-bottom: 6px;
    }

    .severity-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 800;
    }
    .severity-mild { background: #d4edda; color: #155724; }
    .severity-moderate { background: #fff3cd; color: #856404; }
    .severity-severe { background: #f8d7da; color: #721c24; }
    .severity-emergency { background: #dc3545; color: white; }

    .tooltip { position: relative; display: inline-block; }
    .info-icon {
      display: inline-flex;
      width: 18px;
      height: 18px;
      background: var(--brand);
      color: white;
      border-radius: 50%;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      cursor: help;
      font-weight: 800;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 310px;
      background-color: #2f2f2f;
      color: #fff;
      text-align: left;
      border-radius: 10px;
      padding: 10px 12px;
      position: absolute;
      z-index: 2;
      bottom: 135%;
      left: 50%;
      margin-left: -155px;
      opacity: 0;
      transition: opacity 0.2s;
      font-size: 13px;
      line-height: 1.55;
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
      padding: 10px;
      background: white;
      border-radius: 12px;
      font-size: 13px;
      border: 1px dashed #ddd;
    }
    .legend-item { display: flex; align-items: center; gap: 8px; }

    /* -------- Result -------- */
    .result {
      display: none;
      background: #e7f3ff;
      padding: 18px;
      border-radius: 12px;
      margin-top: 18px;
      border: 2px solid var(--brand);
    }
    .result.show { display: block; }

    .result-title {
      color: var(--brand);
      font-size: 24px;
      margin-bottom: 12px;
      text-align: center;
      font-weight: 900;
    }

    .score-box {
      background: var(--brand);
      color: white;
      padding: 12px 14px;
      border-radius: 12px;
      margin: 14px 0;
      text-align: center;
      font-size: 20px;
      font-weight: 900;
    }

    .result-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 12px;
    }

    .footer-note {
      margin-top: 18px;
      padding-top: 14px;
      border-top: 1px solid #e7e7e7;
      color: #666;
      font-size: 13px;
      line-height: 1.6;
      text-align: center;
    }

    /* -------- Report Area (for PDF only) -------- */
    #reportArea {
      display: none;
      padding: 18px;
      font-family: "SarabunNew", "Sarabun", sans-serif;
      color: #222;
    }

    #reportArea h2, #reportArea h3 {
      margin-bottom: 8px;
      color: #222;
    }

    .report-card {
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 12px;
      background: #fff;
    }

    .report-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 14px;
      font-size: 15px;
    }

    .report-grid div strong { color: #111; }

    .report-interpretation {
      border-radius: 12px;
      padding: 14px;
      color: #fff;
      font-weight: 900;
      font-size: 18px;
      text-align: center;
      margin-top: 10px;
    }

    .report-recommend {
      margin-top: 10px;
      padding: 12px;
      border-radius: 12px;
      background: #f7f7f7;
      border: 1px solid #e5e5e5;
      font-size: 15px;
    }

    .report-footer {
      margin-top: 14px;
      font-size: 12.5px;
      color: #666;
      border-top: 1px dashed #ccc;
      padding-top: 10px;
      line-height: 1.6;
      text-align: center;
    }

    /* -------- Print: print only reportArea -------- */
    @media print {
      body { background: white; padding: 0; }
      .container { box-shadow: none; border-radius: 0; padding: 0; }
      #assessmentForm, #result, .footer-note { display: none !important; }
      #reportArea { display: block !important; }
    }

    @media (max-width: 768px) {
      .checkbox-grid { grid-template-columns: 1fr; }
      .patient-info { grid-template-columns: 1fr; }
      .report-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üè• ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h1>
    <p class="subtitle">Naranjo Adverse Drug Reaction Probability Scale</p>

    <form id="assessmentForm">
      <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
        <div class="patient-info">
          <div class="form-group">
            <label for="hn">HN:</label>
            <input type="text" id="hn" name="hn" required />
          </div>
          <div class="form-group">
            <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠:</label>
            <input type="text" id="firstName" name="firstName" required />
          </div>
          <div class="form-group">
            <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <input type="text" id="lastName" name="lastName" required />
          </div>
          <div class="form-group">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
            <input type="text" id="phone" name="phone" required />
          </div>
        </div>
      </div>

      <!-- ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h2>
        <div class="alert">
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠) ‚Äî ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
        </div>

        <div class="checkbox-grid" id="symptomsGrid">
          <!-- Maculopapular rash -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp1')">
            <input type="checkbox" id="symp1" name="symptoms" value="Maculopapular rash (MP rash)">
            <div class="symptom-name">
              Maculopapular rash (MP rash)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô<br>
                  <strong>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢:</strong> ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£ 2 ‡∏Ç‡πâ‡∏≤‡∏á<br>
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡πÑ‡∏Ç‡πâ ‡∏Ñ‡∏±‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏∏‡πà‡∏°‡∏ô‡∏π‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô ‚Äî ‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
            <span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</span>
          </div>

          <!-- Urticaria -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp2')">
            <input type="checkbox" id="symp2" name="symptoms" value="Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)">
            <div class="symptom-name">
              Urticaria (‡∏•‡∏°‡∏û‡∏¥‡∏©)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡πÄ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.<br>
                  <strong>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong> ‡∏≠‡∏≤‡∏à‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏õ‡πá‡∏ô anaphylaxis
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏ô‡∏π‡∏ô‡πÅ‡∏î‡∏á ‡∏Ç‡∏≠‡∏ö‡∏ä‡∏±‡∏î ‡∏Ñ‡∏±‡∏ô‡∏°‡∏≤‡∏Å ‡∏¢‡∏∏‡∏ö‡∏´‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.</div>
            <span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á</span>
          </div>

          <!-- Angioedema -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp3')">
            <input type="checkbox" id="symp3" name="symptoms" value="Angioedema">
            <div class="symptom-name">
              Angioedema
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á<br>
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡∏£‡∏¥‡∏°‡∏ù‡∏µ‡∏õ‡∏≤‡∏Å ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏≠‡∏≤‡∏à‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö anaphylactic shock
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ö‡∏ß‡∏°‡∏•‡∏∂‡∏Å‡πÉ‡∏ï‡πâ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏õ‡∏≤‡∏Å ‡∏ï‡∏≤ ‡∏•‡∏¥‡πâ‡∏ô</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</span>
          </div>

          <!-- Fixed Drug Eruption -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp4')">
            <input type="checkbox" id="symp4" name="symptoms" value="Fixed Drug Eruption">
            <div class="symptom-name">
              Fixed Drug Eruption
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏Ñ‡∏•‡πâ‡∏≥/‡∏°‡πà‡∏ß‡∏á<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏â‡∏û‡∏≤‡∏∞:</strong> ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°<br>
                  <strong>‡∏´‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏¢:</strong> ‡∏°‡∏±‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏°/‡∏£‡∏µ ‡∏™‡∏µ‡∏Ñ‡∏•‡πâ‡∏≥ ‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏° ‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢‡∏î‡∏≥</div>
            <span class="severity-badge severity-mild">‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span>
          </div>

          <!-- Exfoliative dermatitis -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp5')">
            <input type="checkbox" id="symp5" name="symptoms" value="Exfoliative dermatitis">
            <div class="symptom-name">
              Exfoliative dermatitis
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br>
                  <strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Ñ‡∏±‡∏ô ‡πÅ‡∏´‡πâ‡∏á ‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏†‡∏≤‡∏ß‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ã‡πâ‡∏≠‡∏ô
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏î‡∏á‡∏•‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏∏‡∏¢‡∏ó‡∏±‡πà‡∏ß‡∏ï‡∏±‡∏ß ‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô</div>
            <span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
          </div>

          <!-- Erythema multiforme -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp6')">
            <input type="checkbox" id="symp6" name="symptoms" value="Erythema multiforme (EM)">
            <div class="symptom-name">
              Erythema multiforme (EM)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π (target lesion)<br>
                  <strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤<br>
                  <strong>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡πà‡∏ß‡∏°:</strong> ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (HSV) ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πâ‡∏≤‡∏ò‡∏ô‡∏π ‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡∏ô ‡∏Ç‡∏≤ ‡∏ù‡πà‡∏≤‡∏°‡∏∑‡∏≠ ‡∏ù‡πà‡∏≤‡πÄ‡∏ó‡πâ‡∏≤</div>
            <span class="severity-badge severity-moderate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
          </div>

          <!-- SJS -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp7')">
            <input type="checkbox" id="symp7" name="symptoms" value="Stevens-Johnson Syndrome (SJS)">
            <div class="symptom-name">
              Stevens-Johnson Syndrome (SJS)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏<br>
                  <strong>‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞:</strong> ‡∏ï‡∏≤ ‡∏õ‡∏≤‡∏Å ‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÄ‡∏û‡∏®<br>
                  <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ‡∏†‡∏≤‡∏ß‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏∑‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏•‡∏≠‡∏Å‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏ö‡∏∏ ‚Äî ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</div>
            <span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô!</span>
          </div>

          <!-- TEN -->
          <div class="symptom-card" onclick="toggleSymptom(this, 'symp8')">
            <input type="checkbox" id="symp8" name="symptoms" value="Toxic Epidermal Necrolysis (TEN)">
            <div class="symptom-name">
              Toxic Epidermal Necrolysis (TEN)
              <span class="tooltip">
                <span class="info-icon">i</span>
                <span class="tooltiptext">
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞:</strong> ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å >30% ‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢<br>
                  <strong>‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> Nikolsky's sign ‡∏ö‡∏ß‡∏Å<br>
                  <strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢:</strong> ‡∏™‡∏π‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏ô ICU/Burn unit
                </span>
              </span>
            </div>
            <div class="symptom-description">‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏•‡∏≠‡∏Å >30% ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏¢‡∏™‡∏π‡∏á ICU/Burn unit</div>
            <span class="severity-badge severity-emergency">‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢!</span>
          </div>
        </div>

        <div class="legend">
          <div class="legend-item"><span class="severity-badge severity-mild">‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î/‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏¢</span></div>
          <div class="legend-item"><span class="severity-badge severity-moderate">‡∏£‡∏∞‡∏ß‡∏±‡∏á/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-severe">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span></div>
          <div class="legend-item"><span class="severity-badge severity-emergency">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</span></div>
        </div>

        <!-- Add custom symptom -->
        <div class="section" style="margin-top: 14px; background:#ffffff; border-left-color:#28a745;">
          <h2 class="section-title" style="margin-bottom:8px;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)</h2>
          <div class="patient-info">
            <div class="form-group">
              <label for="customSymptomName">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô):</label>
              <input type="text" id="customSymptomName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡∏∑‡πà‡∏ô‡∏ï‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥, ‡∏õ‡∏≤‡∏Å‡∏ö‡∏ß‡∏°, ‡∏Ñ‡∏±‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á">
            </div>
            <div class="form-group">
              <label for="customSymptomSeverity">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏≥‡∏Å‡∏±‡∏ö:</label>
              <select id="customSymptomSeverity">
                <option value="mild">mild</option>
                <option value="moderate" selected>moderate</option>
                <option value="severe">severe</option>
                <option value="emergency">emergency</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="customSymptomDesc">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö):</label>
            <textarea id="customSymptomDesc" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à/‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£"></textarea>
          </div>
          <div class="btn-row">
            <button type="button" class="add-btn" onclick="addCustomSymptom()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</button>
            <button type="button" class="secondary-btn" onclick="clearCustomSymptomInputs()">‡∏•‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</button>
          </div>
        </div>
      </div>

      <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢ -->
      <div class="section">
        <h2 class="section-title">üíä ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢</h2>
        <div id="drugsContainer">
          <div class="drug-entry">
            <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà 1</div>
            <div class="form-group">
              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
              <input type="text" name="drugName[]" required>
            </div>
            <div class="form-group">
              <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
              <input type="date" name="drugDate[]" required>
            </div>
          </div>
        </div>
        <button type="button" class="add-btn" onclick="addDrugEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤</button>
      </div>

      <!-- ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á -->
      <div class="section">
        <h2 class="section-title">‚ö†Ô∏è ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</h2>
        <div class="form-group">
          <select id="severity" name="severity" required>
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á --</option>
            <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Mild)</option>
            <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (Moderate)</option>
            <option value="‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á (Severe)</option>
            <option value="‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Life-threatening)</option>
          </select>
        </div>
      </div>

      <!-- Naranjo Algorithm Questions -->
      <div class="section">
        <h2 class="section-title">üìù ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô Naranjo Algorithm</h2>
        <div class="alert">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á 10 ‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</div>

        <div class="question">
          <div class="question-text">1. ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q1_yes" name="q1" value="‡πÉ‡∏ä‡πà" required><label for="q1_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q1_no" name="q1" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q1_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q1_unknown" name="q1" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q1_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">2. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q2_yes" name="q2" value="‡πÉ‡∏ä‡πà" required><label for="q2_yes">‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q2_no" name="q2" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q2_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q2_unknown" name="q2" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q2_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">3. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ï‡πâ‡∏≤‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q3_yes" name="q3" value="‡πÉ‡∏ä‡πà" required><label for="q3_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q3_no" name="q3" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q3_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q3_unknown" name="q3" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q3_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">4. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏µ‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q4_yes" name="q4" value="‡πÉ‡∏ä‡πà" required><label for="q4_yes">‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q4_no" name="q4" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q4_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q4_unknown" name="q4" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q4_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">5. ‡∏°‡∏µ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q5_yes" name="q5" value="‡πÉ‡∏ä‡πà" required><label for="q5_yes">‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q5_no" name="q5" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q5_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+2)</label></div>
            <div class="radio-option"><input type="radio" id="q5_unknown" name="q5" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q5_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">6. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏´‡∏•‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q6_yes" name="q6" value="‡πÉ‡∏ä‡πà" required><label for="q6_yes">‡πÉ‡∏ä‡πà (-1)</label></div>
            <div class="radio-option"><input type="radio" id="q6_no" name="q6" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q6_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q6_unknown" name="q6" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q6_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">7. ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏¢‡∏≤‡πÉ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏©‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q7_yes" name="q7" value="‡πÉ‡∏ä‡πà" required><label for="q7_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q7_no" name="q7" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q7_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q7_unknown" name="q7" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q7_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">8. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≤‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q8_yes" name="q8" value="‡πÉ‡∏ä‡πà" required><label for="q8_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q8_no" name="q8" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q8_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q8_unknown" name="q8" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q8_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">9. ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Ñ‡∏•‡∏∂‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏¢‡∏≤‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q9_yes" name="q9" value="‡πÉ‡∏ä‡πà" required><label for="q9_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q9_no" name="q9" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q9_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q9_unknown" name="q9" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q9_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>

        <div class="question">
          <div class="question-text">10. ‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
          <div class="radio-group">
            <div class="radio-option"><input type="radio" id="q10_yes" name="q10" value="‡πÉ‡∏ä‡πà" required><label for="q10_yes">‡πÉ‡∏ä‡πà (+1)</label></div>
            <div class="radio-option"><input type="radio" id="q10_no" name="q10" value="‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà"><label for="q10_no">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà (0)</label></div>
            <div class="radio-option"><input type="radio" id="q10_unknown" name="q10" value="‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"><label for="q10_unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö (0)</label></div>
          </div>
        </div>
      </div>

      <!-- ‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≤‡∏¢) -->
      <div class="section">
        <h2 class="section-title">üë®‚Äç‚öïÔ∏è ‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>
        <div class="patient-info">
          <div class="form-group">
            <label for="assessorName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô):</label>
            <input type="text" id="assessorName" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†‡∏Å.‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" />
          </div>
          <div class="form-group">
            <label for="assessorLicense">‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö):</label>
            <input type="text" id="assessorLicense" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏†.XXXXXX" />
          </div>
        </div>
      </div>

      <button type="submit" class="submit-btn">üìä ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•</button>
    </form>

    <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö) -->
    <div id="result" class="result">
      <h2 class="result-title">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>
      <div id="resultContent"></div>

      <div class="result-actions">
        <button type="button" class="submit-btn" style="width:auto; padding:10px 16px;" onclick="generatePDF()">
          üìÑ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô PDF
        </button>
        <button type="button" class="secondary-btn" onclick="resetAll()">
          üîÑ Reset / ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        </button>
        <button type="button" class="secondary-btn" onclick="window.print()">
          üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô)
        </button>
      </div>
    </div>

    <!-- Report Area (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PDF/Print ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) -->
    <div id="reportArea" aria-hidden="true"></div>

    <div class="footer-note">
      ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÇ‡∏î‡∏¢ ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
      ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà bunnasornt@gmail.com
    </div>
  </div>

  <script>
    /* ---------------- Drug dynamic ---------------- */
    let drugCount = 1;

    function toggleSymptom(card, checkboxId) {
      const checkbox = document.getElementById(checkboxId);
      checkbox.checked = !checkbox.checked;
      card.classList.toggle('selected');
    }

    function addDrugEntry() {
      drugCount++;
      const container = document.getElementById('drugsContainer');
      const newEntry = document.createElement('div');
      newEntry.className = 'drug-entry';
      newEntry.innerHTML = `
        <button type="button" class="remove-btn" onclick="removeDrugEntry(this)">‚úñ ‡∏•‡∏ö</button>
        <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${drugCount}</div>
        <div class="form-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
          <input type="text" name="drugName[]" required>
        </div>
        <div class="form-group">
          <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
          <input type="date" name="drugDate[]" required>
        </div>
      `;
      container.appendChild(newEntry);
    }

    function removeDrugEntry(button) {
      const entries = document.querySelectorAll('.drug-entry');
      if (entries.length > 1) {
        button.parentElement.remove();
        updateDrugNumbers();
      } else {
        alert('‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
      }
    }

    function updateDrugNumbers() {
      const entries = document.querySelectorAll('.drug-entry');
      entries.forEach((entry, index) => {
        entry.querySelector('.drug-entry-title').textContent = `‡∏¢‡∏≤‡∏ó‡∏µ‡πà ${index + 1}`;
      });
      drugCount = entries.length;
    }

    /* ---------------- Custom symptoms ---------------- */
    let customSymptomCounter = 0;

    function getSeverityMeta(level){
      switch(level){
        case "mild": return { badgeClass: "severity-mild", label: "mild" };
        case "moderate": return { badgeClass: "severity-moderate", label: "moderate" };
        case "severe": return { badgeClass: "severity-severe", label: "severe" };
        case "emergency": return { badgeClass: "severity-emergency", label: "emergency" };
        default: return { badgeClass: "severity-moderate", label: "moderate" };
      }
    }

    function clearCustomSymptomInputs(){
      document.getElementById("customSymptomName").value = "";
      document.getElementById("customSymptomDesc").value = "";
      document.getElementById("customSymptomSeverity").value = "moderate";
    }

    function addCustomSymptom(){
      const name = (document.getElementById("customSymptomName").value || "").trim();
      const desc = (document.getElementById("customSymptomDesc").value || "").trim();
      const sev = document.getElementById("customSymptomSeverity").value;

      if(!name){
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)");
        return;
      }

      customSymptomCounter++;
      const id = `custom_symp_${customSymptomCounter}`;
      const meta = getSeverityMeta(sev);

      const grid = document.getElementById("symptomsGrid");

      const card = document.createElement("div");
      card.className = "symptom-card";
      card.setAttribute("onclick", `toggleSymptom(this, '${id}')`);
      card.innerHTML = `
        <input type="checkbox" id="${id}" name="symptoms" value="${escapeHtml(name)}">
        <div class="symptom-name">
          ${escapeHtml(name)}
          ${desc ? `
            <span class="tooltip">
              <span class="info-icon">i</span>
              <span class="tooltiptext">
                <strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> ${escapeHtml(desc).replace(/\n/g,"<br>")}
              </span>
            </span>` : ""
          }
        </div>
        <div class="symptom-description">
          ${desc ? escapeHtml(desc) : "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)"}
        </div>
        <span class="severity-badge ${meta.badgeClass}">${meta.label}</span>
      `;

      grid.appendChild(card);
      clearCustomSymptomInputs();
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    /* ---------------- Naranjo scoring ---------------- */
    const SCORING = {
      1: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      2: { '‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      3: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      4: { '‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      5: { '‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 2, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      6: { '‡πÉ‡∏ä‡πà': -1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      7: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      8: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      9: { '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 },
      10:{ '‡πÉ‡∏ä‡πà': 1, '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà': 0, '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö': 0 }
    };

    function interpretScore(score){
      if (score >= 9)  return { text: "‡πÉ‡∏ä‡πà‡πÅ‡∏ô‡πà (Definite)", color: "#dc3545" };
      if (score >= 5)  return { text: "‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Probable)", color: "#fd7e14" };
      if (score >= 1)  return { text: "‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏ä‡πà (Possible)", color: "#ffc107" };
      return { text: "‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πà (Doubtful)", color: "#28a745" };
    }

    function isEmergencySymptoms(selectedSymptoms){
      return selectedSymptoms.some(s =>
        String(s).includes('SJS') ||
        String(s).includes('TEN') ||
        String(s).toLowerCase().includes('angioedema')
      );
    }

    /* ---------------- Build report content ---------------- */
    function buildReportData(){
      const hn = document.getElementById('hn').value.trim();
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const severity = document.getElementById('severity').value;

      const assessorName = document.getElementById('assessorName').value.trim();
      const assessorLicense = document.getElementById('assessorLicense').value.trim();

      const selectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked'))
        .map(cb => cb.value);
      const symptomsText = selectedSymptoms.length > 0 ? selectedSymptoms.join(', ') : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';

      const drugNames = Array.from(document.querySelectorAll('input[name="drugName[]"]')).map(i => i.value.trim());
      const drugDates = Array.from(document.querySelectorAll('input[name="drugDate[]"]')).map(i => i.value);
      const drugsList = drugNames.map((name, idx) => `${name || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤"} (${drugDates[idx] || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"})`).join(', ');

      let score = 0;
      for (let i = 1; i <= 10; i++) {
        const checked = document.querySelector(`input[name="q${i}"]:checked`);
        if(!checked) continue;
        score += SCORING[i][checked.value] || 0;
      }

      const interp = interpretScore(score);

      return {
        hn, firstName, lastName, phone,
        severity,
        assessorName, assessorLicense,
        symptomsText, selectedSymptoms,
        drugsList,
        score,
        interpretation: interp.text,
        interpretationColor: interp.color,
        emergency: isEmergencySymptoms(selectedSymptoms)
      };
    }

    function renderResultToPage(data){
      const resultContent = document.getElementById('resultContent');

      const adviceEmergency = data.emergency
        ? `<li style="color:#b00020; font-weight:900;">‚ö†Ô∏è ‡∏û‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>`
        : ``;

      resultContent.innerHTML = `
        <div style="background:#ffffff; padding:14px; border-radius:12px; border:1px solid #dfe6ff;">
          <h3 style="color:#667eea; margin-bottom:10px; font-size:18px; font-weight:900;">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px 12px; font-size:15px;">
            <div><strong>HN:</strong> ${escapeHtml(data.hn)}</div>
            <div><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${escapeHtml(data.phone)}</div>
            <div><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> ${escapeHtml(data.firstName)} ${escapeHtml(data.lastName)}</div>
            <div><strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ${escapeHtml(data.severity || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏")}</div>
            <div style="grid-column:1 / -1;"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤:</strong> ${escapeHtml(data.symptomsText)}</div>
            <div style="grid-column:1 / -1;"><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢:</strong> ${escapeHtml(data.drugsList)}</div>
            <div style="grid-column:1 / -1;"><strong>‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô:</strong> ${escapeHtml(data.assessorName)} ${data.assessorLicense ? `(${escapeHtml(data.assessorLicense)})` : ""}</div>
          </div>
        </div>

        <div class="score-box">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Naranjo: ${data.score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>

        <div style="background:${data.interpretationColor}; color:#fff; padding:14px; border-radius:12px; font-size:20px; font-weight:900; text-align:center;">
          ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: ${escapeHtml(data.interpretation)}
        </div>

        <div style="margin-top:12px; padding:12px; background:#f8f9fa; border-radius:12px; border:1px solid #e6e6e6;">
          <h4 style="color:#667eea; margin-bottom:8px; font-size:16px; font-weight:900;">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</h4>
          <ul style="line-height:1.8; padding-left:20px; font-size:15px;">
            <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö/‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</li>
            <li>‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡∏ï‡∏≤‡∏°‡∏î‡∏∏‡∏•‡∏¢‡∏û‡∏¥‡∏ô‡∏¥‡∏à)</li>
            <li>‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</li>
            <li>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</li>
            ${adviceEmergency}
          </ul>
        </div>
      `;
    }

    function renderReportArea(data){
      const report = document.getElementById("reportArea");

      const now = new Date();
      const dt = now.toLocaleString("th-TH", { year:"numeric", month:"2-digit", day:"2-digit", hour:"2-digit", minute:"2-digit" });

      const emergencyLine = data.emergency
        ? `<div style="margin-top:10px; color:#b00020; font-weight:900;">‚ö†Ô∏è ‡∏û‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</div>`
        : ``;

      report.innerHTML = `
        <div style="font-family:'SarabunNew','Sarabun',sans-serif;">
          <h2 style="text-align:center; font-weight:900; margin-bottom:4px;">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤</h2>
          <div style="text-align:center; font-size:13px; color:#666; margin-bottom:12px;">
            Naranjo Adverse Drug Reaction Probability Scale ‚Ä¢ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${escapeHtml(dt)}
          </div>

          <div class="report-card">
            <h3 style="font-size:17px; font-weight:900; margin-bottom:8px;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
            <div class="report-grid">
              <div><strong>HN:</strong> ${escapeHtml(data.hn)}</div>
              <div><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${escapeHtml(data.phone)}</div>
              <div><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${escapeHtml(data.firstName)}</div>
              <div><strong>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> ${escapeHtml(data.lastName)}</div>
              <div><strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á:</strong> ${escapeHtml(data.severity || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏")}</div>
              <div><strong>‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô:</strong> ${escapeHtml(data.assessorName)} ${data.assessorLicense ? `(${escapeHtml(data.assessorLicense)})` : ""}</div>
              <div style="grid-column:1 / -1;"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏∑‡πà‡∏ô‡πÅ‡∏û‡πâ‡∏¢‡∏≤:</strong> ${escapeHtml(data.symptomsText)}</div>
              <div style="grid-column:1 / -1;"><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢:</strong> ${escapeHtml(data.drugsList)}</div>
            </div>
          </div>

          <div class="report-card">
            <h3 style="font-size:17px; font-weight:900; margin-bottom:8px;">‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏ú‡∏•</h3>
            <div style="display:flex; gap:10px; align-items:stretch; flex-wrap:wrap;">
              <div style="flex:1; min-width:220px; border:1px solid #e5e5e5; border-radius:12px; padding:12px; text-align:center;">
                <div style="font-size:13px; color:#666;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
                <div style="font-size:24px; font-weight:900;">${data.score}</div>
              </div>
              <div style="flex:2; min-width:260px;" class="report-interpretation">
                ${escapeHtml(data.interpretation)}
              </div>
            </div>
            ${emergencyLine}
          </div>

          <div class="report-recommend">
            <div style="font-weight:900; margin-bottom:6px;">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</div>
            <ol style="padding-left:18px; line-height:1.8;">
              <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö/‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</li>
              <li>‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡∏ï‡∏≤‡∏°‡∏î‡∏∏‡∏•‡∏¢‡∏û‡∏¥‡∏ô‡∏¥‡∏à)</li>
              <li>‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</li>
              <li>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</li>
            </ol>
          </div>

          <div class="report-footer">
            ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÇ‡∏î‡∏¢ ‡∏†‡∏Å.‡∏ö‡∏£‡∏£‡∏ì‡∏™‡∏£‡∏ì‡πå ‡πÄ‡∏ï‡∏ä‡∏∞‡∏à‡∏≥‡πÄ‡∏£‡∏¥‡∏ç‡∏™‡∏∏‡∏Ç ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà bunnasornt@gmail.com
          </div>
        </div>
      `;

      // Set interpretation background color AFTER HTML is ready
      const interpBox = report.querySelector(".report-interpretation");
      if (interpBox) {
        interpBox.style.background = data.interpretationColor;
      }
    }

    /* ---------------- Form submit ---------------- */
    document.getElementById('assessmentForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const data = buildReportData();
      renderResultToPage(data);
      renderReportArea(data);

      document.getElementById('result').classList.add('show');
      document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
    });

    /* ---------------- PDF Generation (report only) ---------------- */
    async function generatePDF(){
      try{
        // Ensure report is up to date
        const data = buildReportData();
        renderReportArea(data);

        // wait for fonts
        if (document.fonts && document.fonts.ready) {
          await document.fonts.ready;
        }

        // check library
        if (typeof html2pdf === "undefined") {
          alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡πÑ‡∏î‡πâ (html2pdf.js) ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Chrome/Edge ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î");
          return;
        }

        const report = document.getElementById("reportArea");
        report.style.display = "block"; // must be visible for accurate render

        const filename = `ADR_Naranjo_${(data.hn || "HN")}_${new Date().toISOString().slice(0,10)}.pdf`;

        const opt = {
          margin:       10,
          filename:     filename,
          image:        { type: 'jpeg', quality: 0.98 },
          html2canvas:  { scale: 2, useCORS: true, backgroundColor: '#ffffff' },
          jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
          pagebreak:    { mode: ['css', 'legacy'] }
        };

        await html2pdf().set(opt).from(report).save();

        report.style.display = "none";
      } catch (err){
        console.error(err);
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF ‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ Chrome/Edge ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)");
        // As a fallback, user can still print
      }
    }

    /* ---------------- Reset / Clear all ---------------- */
    function resetAll(){
      const form = document.getElementById("assessmentForm");
      form.reset();

      // clear selected symptom styles
      document.querySelectorAll(".symptom-card.selected").forEach(c => c.classList.remove("selected"));

      // reset drugs to 1
      const container = document.getElementById("drugsContainer");
      container.innerHTML = `
        <div class="drug-entry">
          <div class="drug-entry-title">‡∏¢‡∏≤‡∏ó‡∏µ‡πà 1</div>
          <div class="form-group">
            <label>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤:</label>
            <input type="text" name="drugName[]" required>
          </div>
          <div class="form-group">
            <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏¢‡∏≤:</label>
            <input type="date" name="drugDate[]" required>
          </div>
        </div>
      `;
      drugCount = 1;

      // remove custom symptoms that were added
      document.querySelectorAll('[id^="custom_symp_"]').forEach(el => {
        const card = el.closest(".symptom-card");
        if (card) card.remove();
      });
      customSymptomCounter = 0;
      clearCustomSymptomInputs();

      // hide result + clear report
      document.getElementById("result").classList.remove("show");
      document.getElementById("resultContent").innerHTML = "";
      document.getElementById("reportArea").innerHTML = "";
      document.getElementById("reportArea").style.display = "none";

      // scroll to top
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  </script>
</body>
</html>
